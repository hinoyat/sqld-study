# 1-8. 모델이 표현하는 트랜잭션의 이해

## 1. 트랜잭션(Transaction)의 개념

* 데이터베이스에서 **하나의 논리적 작업 단위**를 의미한다.
* 여러 개의 SQL문(SELECT, INSERT, UPDATE, DELETE)이 묶여 하나의 업무를 수행한다.
* 트랜잭션은 반드시 **전부 성공(All)** 또는 **전부 실패(Nothing)** 원칙을 따라야 한다.
* 업무적으로 **연속성**과 **일관성**을 유지하기 위해 사용된다.

### 예시: 계좌이체

1. A 고객 잔액이 100만원 이상인지 확인 (SELECT)
2. 이상이면, A 고객 잔액에서 100만원 차감 (UPDATE)
3. 동시에, B 고객 잔액에 100만원 추가 (UPDATE)

* **주의**: 2번만 수행되고 3번이 실패한다면 돈은 사라진다 → 반드시 **동시 COMMIT 또는 ROLLBACK** 되어야 한다.

---

## 2. 트랜잭션의 성질 (ACID)

트랜잭션은 데이터베이스 관리에서 다음 네 가지 성질을 만족해야 한다.

1. **원자성 (Atomicity)**

    * 트랜잭션의 모든 연산은 전부 수행되거나, 전혀 수행되지 않아야 한다.
    * 예: 계좌이체에서 A 계좌 차감만 되고 B 계좌 증가가 실패하면 안 됨.

2. **일관성 (Consistency)**

    * 트랜잭션 실행 전과 후에 데이터베이스의 무결성이 보장되어야 한다.
    * 예: 계좌이체 전후 총 잔액 합은 변하지 않아야 한다.

3. **고립성 (Isolation)**

    * 동시에 실행되는 트랜잭션은 서로 간섭하지 않아야 한다.
    * 예: 두 사람이 동시에 같은 계좌에서 돈을 빼더라도 각각의 트랜잭션은 독립적으로 처리되어야 한다.

4. **지속성 (Durability)**

    * 트랜잭션이 정상적으로 완료되면, 그 결과는 영구적으로 DB에 반영되어야 한다.
    * 예: 시스템이 다운되어도 이미 성공한 계좌이체 결과는 보존되어야 한다.

---

## 3. 트랜잭션과 관계

* **필수적 관계 (Mandatory Relationship)**

    * 두 엔터티가 반드시 연결되어야 하는 경우, 하나의 트랜잭션으로 묶인다.
    * 예: 계좌와 관리점(계좌는 반드시 하나의 관리점에 소속됨).

* **선택적 관계 (Optional Relationship)**

    * 두 엔터티가 독립적으로 존재할 수 있는 경우, 선택적 관계로 표현된다.
    * 예: 직원이 필수적으로 프로젝트에 배정되지 않을 수도 있음.

---

## 4. 관계 표기법과 트랜잭션

* **IE 표기법**

    * 필수적 관계: 실선 (원 없음)
    * 선택적 관계: 실선 끝에 원

* **바커 표기법**

    * 필수적 관계: 실선
    * 선택적 관계: 점선

---

## 핵심 요약

* 트랜잭션은 **논리적 작업 단위**로, 반드시 ACID 특성을 만족해야 한다.
* 업무 처리 시 **부분 COMMIT 불가** → All or Nothing 원칙.
* ERD에서 필수 관계는 트랜잭션을 형성, 선택 관계는 독립적 수행 가능성을 의미.

## 용어 설명

* **트랜잭션(Transaction)**: DB의 논리적 작업 단위.
* **COMMIT**: 변경 내용을 DB에 확정 저장.
* **ROLLBACK**: 변경 내용을 취소하고 이전 상태로 복구.
* **ACID**: 트랜잭션의 4대 성질 (원자성, 일관성, 고립성, 지속성).
